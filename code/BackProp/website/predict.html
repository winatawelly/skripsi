<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>DeepFootball</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://kit.fontawesome.com/2d82527c86.js" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css?family=Catamaran&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Solway&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./css/style.css">
    <title>Document</title>
</head>
<body>
    <nav class="navbar">
            <div class="container">
                <h1 class="logo"><a href="index.html">DeepFootball</a></h1>
                <ul class="nav">
                    <li><a href="about.html">About</a></li>
                    <li><a href="test_result.html">Result</a></li>
                    <li><a href="predict.html">Predict</a></li>
                </ul>
            </div>
    </nav>

    <section class="header">
        <h1>Predict</h1>
        <p>Input teams and players ratings<br> These ratings will be feeded into neural network to generate the predicted final score</p>
    </section>

    <section class="result">

    </section>

    <section class="inputs">
        <div class="form">
            <div class="home">
                    <h2>Home Team</h2>
                    <input id='team-home' placeholder="Home Team" class='input-team-home' type="number" placeholder="Team Rating">
                    <div>
                        <input id='player-home-0' class='input-player' type="number" placeholder="Player Home Rating 1">
                        <select name="" id="player-home-pos-0">
                            <option value="gk">Goalkeeper</option>
                        </select>

                        <input id='player-home-1' class='input-player' type="number" placeholder="Player Home Rating 2">
                        <select name="" id="player-home-pos-1">
                            <option value="null">Select Position</option>
                            <option value="def">Defender</option>
                            <option value="mid">Midfielder</option>
                            <option value="str">Striker</option>
                        </select>
                        
                        <input id='player-home-2' class='input-player' type="number" placeholder="Player Home Rating 3">
                        <select name="" id="player-home-pos-2">
                                <option value="null">Select Position</option>
                                <option value="def">Defender</option>
                                <option value="mid">Midfielder</option>
                                <option value="str">Striker</option>
                            </select>
                        <input id='player-home-3' class='input-player' type="number" placeholder="Player Home Rating 4">
                        <select name="" id="player-home-pos-3">
                                <option value="null">Select Position</option>
                                <option value="def">Defender</option>
                                <option value="mid">Midfielder</option>
                                <option value="str">Striker</option>
                            </select>
                        <input id='player-home-4' class='input-player' type="number" placeholder="Player Home Rating 5">
                        <select name="" id="player-home-pos-4">
                                <option value="null">Select Position</option>
                                <option value="def">Defender</option>
                                <option value="mid">Midfielder</option>
                                <option value="str">Striker</option>
                            </select>
                        <input id='player-home-5' class='input-player' type="number" placeholder="Player Home Rating 6">
                        <select name="" id="player-home-pos-5">
                                <option value="null">Select Position</option>
                                <option value="def">Defender</option>
                                <option value="mid">Midfielder</option>
                                <option value="str">Striker</option>
                            </select>
                        <input id='player-home-6' class='input-player' type="number" placeholder="Player Home Rating 7">
                        <select name="" id="player-home-pos-6">
                                <option value="null">Select Position</option>
                                <option value="def">Defender</option>
                                <option value="mid">Midfielder</option>
                                <option value="str">Striker</option>
                            </select>
                        <input id='player-home-7' class='input-player' type="number" placeholder="Player Home Rating 8">
                        <select name="" id="player-home-pos-7">
                                <option value="null">Select Position</option>
                                <option value="def">Defender</option>
                                <option value="mid">Midfielder</option>
                                <option value="str">Striker</option>
                            </select>
                        <input id='player-home-8' class='input-player' type="number" placeholder="Player Home Rating 9">
                        <select name="" id="player-home-pos-8">
                                <option value="null">Select Position</option>
                                <option value="def">Defender</option>
                                <option value="mid">Midfielder</option>
                                <option value="str">Striker</option>
                            </select>
                        <input id='player-home-9' class='input-player' type="number" placeholder="Player Home Rating 10">
                        <select name="" id="player-home-pos-9">
                                <option value="null">Select Position</option>
                                <option value="def">Defender</option>
                                <option value="mid">Midfielder</option>
                                <option value="str">Striker</option>
                            </select>
                        <input id='player-home-10' class='input-player' type="number" placeholder="Player Home Rating 11">
                        <select name="" id="player-home-pos-10">
                                <option value="null">Select Position</option>
                                <option value="def">Defender</option>
                                <option value="mid">Midfielder</option>
                                <option value="str">Striker</option>
                            </select>
                    </div>
                    
            </div>
                <div class="away">
                    <h2>Away Team</h2>
                    <input id='team-away' placeholder="Away Team" class='input-team-away' type="number" placeholder="Team Rating">
                    <div>
                        <input id='player-away-0' class='input-player' type="number" placeholder="Player Away Rating 1">
                        <select name="" id="player-away-pos-0">
                                <option value="gk">Goalkeeper</option>
                        </select>
                        <input id='player-away-1' class='input-player' type="number" placeholder="Player Away Rating 2">
                        <select name="" id="player-away-pos-1">
                                <option value="null">Select Position</option>
                                <option value="def">Defender</option>
                                <option value="mid">Midfielder</option>
                                <option value="str">Striker</option>
                        </select>
                        <input id='player-away-2' class='input-player' type="number" placeholder="Player Away Rating 3">
                        <select name="" id="player-away-pos-2">
                                <option value="null">Select Position</option>
                                <option value="def">Defender</option>
                                <option value="mid">Midfielder</option>
                                <option value="str">Striker</option>
                        </select>
                        <input id='player-away-3' class='input-player' type="number" placeholder="Player Away Rating 4">
                        <select name="" id="player-away-pos-3">
                                <option value="null">Select Position</option>
                                <option value="def">Defender</option>
                                <option value="mid">Midfielder</option>
                                <option value="str">Striker</option>
                        </select>
                        <input id='player-away-4' class='input-player' type="number" placeholder="Player Away Rating 5">
                        <select name="" id="player-away-pos-4">
                                <option value="null">Select Position</option>
                                <option value="def">Defender</option>
                                <option value="mid">Midfielder</option>
                                <option value="str">Striker</option>
                        </select>
                        <input id='player-away-5' class='input-player' type="number" placeholder="Player Away Rating 6">
                        <select name="" id="player-away-pos-5">
                                <option value="null">Select Position</option>
                                <option value="def">Defender</option>
                                <option value="mid">Midfielder</option>
                                <option value="str">Striker</option>
                        </select>
                        <input id='player-away-6' class='input-player' type="number" placeholder="Player Away Rating 7">
                        <select name="" id="player-away-pos-6">
                                <option value="null">Select Position</option>
                                <option value="def">Defender</option>
                                <option value="mid">Midfielder</option>
                                <option value="str">Striker</option>
                        </select>
                        <input id='player-away-7' class='input-player' type="number" placeholder="Player Away Rating 8">
                        <select name="" id="player-away-pos-7">
                                <option value="null">Select Position</option>
                                <option value="def">Defender</option>
                                <option value="mid">Midfielder</option>
                                <option value="str">Striker</option>
                        </select>
                        <input id='player-away-8' class='input-player' type="number" placeholder="Player Away Rating 9">
                        <select name="" id="player-away-pos-8">
                                <option value="null">Select Position</option>
                                <option value="def">Defender</option>
                                <option value="mid">Midfielder</option>
                                <option value="str">Striker</option>
                        </select>
                        <input id='player-away-9' class='input-player' type="number" placeholder="Player Away Rating 10">
                        <select name="" id="player-away-pos-9">
                                <option value="null">Select Position</option>
                                <option value="def">Defender</option>
                                <option value="mid">Midfielder</option>
                                <option value="str">Striker</option>
                        </select>
                        <input id='player-away-10' class='input-player' type="number" placeholder="Player Away Rating 11">
                        <select name="" id="player-away-pos-10">
                                <option value="null">Select Position</option>
                                <option value="def">Defender</option>
                                <option value="mid">Midfielder</option>
                                <option value="str">Striker</option>
                        </select>
                    </div>
                </div>
        </div>
        <button class="btn-danger" onclick="clearInput()">Clear</button>
        <button class="btn" onclick="predict()">Predict</button>
    </section>
   

    <footer>
            <div class="container">
                <h4>© 2019 Welly Winata</h4>
                <div>
                        <a href="http://twitter.com">
                            <i class="fab fa-twitter fa-2x"></i>
                          </a>
                          <a href="http://facebook.com">
                            <i class="fab fa-facebook fa-2x"></i>
                          </a>
                          <a href="http://instagram.com">
                            <i class="fab fa-instagram fa-2x"></i>
                          </a>
                </div>
                
            </div>
    </footer>

    <script
        src="https://code.jquery.com/jquery-3.4.1.js"
        integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
        crossorigin="anonymous">
    </script>

    <script>
        function predict(){
            let data = {};
            if($("#team-home").val() != ''){
                data['teamHome'] = $("#team-home").val();
            }else{
                alert("KOSONG !");
                return;
            }
            
            let def = 0;
            let mid = 0;
            let str = 0;
            for(let i = 0 ; i < 11 ; i++){
                if($("#player-home-"+i).val() != ''){
                    data['playerHome'+i] = $("#player-home-"+i).val();
                }else{
                    alert("KOSONG !");
                    return;
                }
                let pos = $("#player-home-pos-"+i).val(); 
                if( pos == 'null'){
                    alert("Masih ada posisi yang kosong !");
                    return;
                }else{
                    if(pos == 'def'){
                        def++;
                    }
                    if(pos == 'mid'){
                        mid++;
                    }
                    if(pos == 'str'){
                        str++;
                    }
                }
                if(i == 10){
                    i1 = 11;
                    i2 = 12;
                    i3 = 13;
                    data['playerHome'+i1] = def;
                    data['playerHome'+i2] = mid;
                    data['playerHome'+i3] = str;

                }   
            }


            if($("#team-away").val() != ''){
                data['teamAway'] = $("#team-away").val();
            }
            else{
                alert("KOSONG !");
                return;
            }
            def = 0;
            mid = 0;
            str = 0;

            for(let i = 0 ; i < 11 ; i++){
                if($("#player-away-"+i).val() != ''){
                    data['playerAway'+i] = $("#player-away-"+i).val();
                }else{
                    alert("KOSONG !");
                    return;
                }
                let pos = $("#player-away-pos-"+i).val();
                
                if( pos == 'null'){
                    alert("Masih ada posisi yang kosong !");
                    return;
                }else{
                    if(pos == 'def'){
                        def++;
                    }
                    if(pos == 'mid'){
                        mid++;
                    }
                    if(pos == 'str'){
                        str++;
                    }
                }
                if(i == 10){
                    i1 = 11;
                    i2 = 12;
                    i3 = 13;
                    data['playerAway'+i1] = def;
                    data['playerAway'+i2] = mid;
                    data['playerAway'+i3] = str;

                }   
                
            }
            
            console.log(data);

            $.post( "http://localhost:3000/predict" , data).done((data)=>{
                let result = `${data[0]} - ${data[1]}`;
                $(".result").html(`<h2>${result}</h2>`)
            })
            
        }

        function clearInput(){
            $(".result").html('');
            $("#team-home").val('');
            $("#team-away").val('');
            for(let i = 0 ; i < 11 ; i++){
                $("#player-home-"+i).val('');
                $("#player-away-"+i).val('');
            }
        }

    </script>
    
</body>
</html>